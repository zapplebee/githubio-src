<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><title>zapplebee.github.io | Create an actually custom checkbox</title><link rel="apple-touch-icon" sizes="180x180" href="../icons/favicon-180.png"/><link rel="icon" type="image/png" sizes="32x32" href="../icons/favicon-32.png"/><link rel="icon" type="image/png" sizes="16x16" href="../icons/favicon-16.png"/><link rel="icon" type="image/png" href="../icons/favicon-96.png" sizes="96x96"/><link rel="apple-touch-icon" sizes="57x57" href="../icons/favicon-57.png"/><link rel="apple-touch-icon" sizes="114x114" href="../icons/favicon-114.png"/><link rel="apple-touch-icon" sizes="72x72" href="../icons/favicon-72.png"/><link rel="apple-touch-icon" sizes="144x144" href="../icons/favicon-144.png"/><link rel="apple-touch-icon" sizes="60x60" href="../icons/favicon-60.png"/><link rel="apple-touch-icon" sizes="120x120" href="../icons/favicon-120.png"/><link rel="apple-touch-icon" sizes="76x76" href="../icons/favicon-76.png"/><link rel="apple-touch-icon" sizes="152x152" href="../icons/favicon-152.png"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="twitter:site" content="@zapplebee"/><meta name="twitter:card" content="summary"/><meta name="twitter:description" content="How to create an actually cross-platform HTML checkbox easily that remains ARIA compliant"/><meta name="description" content="How to create an actually cross-platform HTML checkbox easily that remains ARIA compliant"/><meta name="twitter:image" content="./how-to-build-an-actually-custom-checkbox-twitter.png"/><meta name="twitter:image:alt" content="Image of text: Create an actually custom checkbox | zapplebee.github.io"/><meta property="og:locale" content="en_US"/><meta property="og:image" content="./how-to-build-an-actually-custom-checkbox-og.png"/><link rel="canonical" href="https://zapplebee.github.io/posts/how-to-build-an-actually-custom-checkbox.html"/><meta property="og:url" content="https://zapplebee.github.io/posts/how-to-build-an-actually-custom-checkbox.html"/><meta property="og:description" content="How to create an actually cross-platform HTML checkbox easily that remains ARIA compliant"/><meta property="og:type" content="article"/><meta property="og:title" content="Create an actually custom checkbox"/><meta property="article:published_time" content="2022-03-08T18:00:00-06:00"/><style>@import "~/styles/main.scss";</style></head><body class="article-page"><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><link href="https://fonts.googleapis.com/css2?family=Karla:wght@400;800&amp;family=Source+Code+Pro&amp;display=swap" rel="stylesheet"/><header><nav><a class="title" href="/"><span>zapplebee</span><span>.github.io</span></a><div class="header-links"><a href="/">posts</a><a href="./../about.html">about</a></div></nav></header><div class="headshot"><img src="~/zac.png" alt="A photo of Zac&#x27;s face."/></div><article><h1>Create an actually custom checkbox</h1><p>How to create an actually cross-platform HTML checkbox easily that remains ARIA compliant</p><div class="by-line"><span>Zac Skalko</span> | <span>Minneapolis, MN</span> | <time class="article-date" datetime="2022-03-08">2022-03-08</time></div><figure class="attributed-image"><img src="~/checkboxes.jpg"/><figcaption><a href="https://www.pexels.com/photo/red-check-mark-over-black-box-8850706/">Photo by Tara Winstead from Pexels</a></figcaption></figure><p>You have Googled to the ends of the Earth to figure out how to actually customize a checkbox.</p><h2>Is this guide for me?</h2><ul><li>Have you ever written an SVG is <em>AND/OR</em> do you have the assets you need for your checkboxes in hand?</li><li>Are you absolutely sure you don&#x27;t want to use the native checkbox?</li><li>Like, really sure?</li><li>Because there&#x27;s a lot good about using the platform.</li><li>Would you be happier using an off-the-shelf checkbox from a component library?</li><li>Are you willing to write a version of your checkbox for every state (focused, hovered, etc)?</li><li>Are you already using React? Because we&#x27;re going to use it here. Though you absolutetly do not need to.</li></ul><h2>Let&#x27;s see it working first.</h2><iframe src="https://codesandbox.io/embed/dry-sun-vzvnc?fontsize=14&amp;hidenavigation=1&amp;theme=dark" title="dry-sun-vzvnc" style="width:99%;height:80vh;border:0;border-right:1px solid black;border-radius:0;overflow:hidden" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe><h2>CSS Variables</h2><p>Let&#x27;s take a look at <code>styles.css</code>. If you&#x27;re unfamiliar with CSS variables this might feel a little strange.</p><pre><div style="display:block;overflow-x:auto;padding:2em;background:#011627;color:#d6deeb;font-size:0.6em;margin:1em"><code class="language-css" style="white-space:pre"><span style="color:#ff6363">input</span><span style="color:#c792ea;font-style:italic">[type=</span><span style="color:#ecc48d;font-style:italic">&quot;checkbox&quot;</span><span style="color:#c792ea;font-style:italic">]</span><span> {
</span><span>  </span><span style="color:#80cbc4">width</span><span>: </span><span style="color:#F78C6C">1rem</span><span>;
</span><span>  </span><span style="color:#80cbc4">height</span><span>: </span><span style="color:#F78C6C">1rem</span><span>;
</span><span>  appearance: </span><span style="color:#addb67;font-style:italic">var</span><span>(--appearance);
</span><span>  -webkit-appearance: </span><span style="color:#addb67;font-style:italic">var</span><span>(--appearance);
</span>}
<!-- -->
<span></span><span style="color:#ff6363">input</span><span style="color:#c792ea;font-style:italic">[type=</span><span style="color:#ecc48d;font-style:italic">&quot;checkbox&quot;</span><span style="color:#c792ea;font-style:italic">]</span><span style="color:#c792ea;font-style:italic">::before</span><span> {
</span><span>  </span><span style="color:#80cbc4">width</span><span>: </span><span style="color:#F78C6C">100%</span><span>;
</span><span>  </span><span style="color:#80cbc4">height</span><span>: </span><span style="color:#F78C6C">100%</span><span>;
</span><span>  </span><span style="color:#80cbc4">content</span><span>: </span><span style="color:#ecc48d">&quot;&quot;</span><span>;
</span><span>  </span><span style="color:#80cbc4">display</span><span>: block;
</span><span>  </span><span style="color:#80cbc4">background-size</span><span>: contain;
</span><span>  </span><span style="color:#80cbc4">background-image</span><span>: </span><span style="color:#addb67;font-style:italic">var</span><span>(--svgStringInitial);
</span>}
<!-- -->
<span></span><span style="color:#ff6363">input</span><span style="color:#c792ea;font-style:italic">[type=</span><span style="color:#ecc48d;font-style:italic">&quot;checkbox&quot;</span><span style="color:#c792ea;font-style:italic">]</span><span style="color:#c792ea;font-style:italic">:checked</span><span style="color:#c792ea;font-style:italic">::before</span><span> {
</span><span>  </span><span style="color:#80cbc4">background-image</span><span>: </span><span style="color:#addb67;font-style:italic">var</span><span>(--svgStringChecked);
</span>}
<!-- -->
<span></span><span style="color:#ff6363">input</span><span style="color:#c792ea;font-style:italic">[type=</span><span style="color:#ecc48d;font-style:italic">&quot;checkbox&quot;</span><span style="color:#c792ea;font-style:italic">]</span><span style="color:#c792ea;font-style:italic">:disabled</span><span style="color:#c792ea;font-style:italic">::before</span><span> {
</span><span>  </span><span style="color:#80cbc4">background-image</span><span>: </span><span style="color:#addb67;font-style:italic">var</span><span>(--svgStringDisabled);
</span>}
</code></div></pre><p>On line 4 we see</p><pre><div style="display:block;overflow-x:auto;padding:2em;background:#011627;color:#d6deeb;font-size:0.6em;margin:1em"><code class="language-css" style="white-space:pre"><span>appearance: </span><span style="color:#addb67;font-style:italic">var</span><span>(--appearance);</span></code></div></pre><p>This <code>var()</code> lets us access a value we&#x27;ve declared elsewhere. In this case we&#x27;ve declared it inline in the JSX.</p><pre><div style="display:block;overflow-x:auto;padding:2em;background:#011627;color:#d6deeb;font-size:0.6em;margin:1em"><code class="language-jsx" style="white-space:pre"><span style="color:#c792ea;font-style:italic">export</span><span> </span><span style="color:#c792ea;font-style:italic">default</span><span> </span><span style="color:#c792ea;font-style:italic">function</span><span style="color:#82AAFF"> </span><span style="color:#DCDCAA;font-style:italic">Checkbox</span><span style="color:#82AAFF">(</span><span style="color:#82AAFF">) </span><span>{
</span><span>  </span><span style="color:#c792ea;font-style:italic">const</span><span> cssVariables = {
</span><span>    </span><span style="color:#ecc48d">&quot;--apperance&quot;</span><span>: </span><span style="color:#ecc48d">&quot;none&quot;</span><span>,
</span><span>    </span><span style="color:#ecc48d">&quot;--svgStringInitial&quot;</span><span>: svgString(</span><span style="color:#ecc48d">&quot;black&quot;</span><span>),
</span><span>    </span><span style="color:#ecc48d">&quot;--svgStringChecked&quot;</span><span>: svgString(</span><span style="color:#ecc48d">&quot;green&quot;</span><span>),
</span><span>    </span><span style="color:#ecc48d">&quot;--svgStringDisabled&quot;</span><span>: svgString(</span><span style="color:#ecc48d">&quot;gray&quot;</span><span>),
</span>  };
<span>  </span><span style="color:#c792ea;font-style:italic">return</span><span> </span><span class="xml" style="color:#7fdbca">&lt;</span><span class="xml" style="color:#7fdbca">input</span><span class="xml" style="color:#7fdbca"> </span><span class="xml" style="color:#7fdbca">style</span><span class="xml" style="color:#7fdbca">=</span><span class="xml" style="color:#ecc48d">{cssVariables}</span><span class="xml" style="color:#7fdbca"> </span><span class="xml" style="color:#7fdbca">type</span><span class="xml" style="color:#7fdbca">=</span><span class="xml" style="color:#ecc48d">&quot;checkbox&quot;</span><span class="xml" style="color:#7fdbca"> /&gt;</span><span>;
</span>}
</code></div></pre><p>These variables are just the same as any other CSS property.</p><p>You probably notice however though that we&#x27;re setting <code>--appearance</code> here. This is a nice fallback measure in the case that the browser does not support CSS variables <a href="https://caniuse.com/css-variables">(actually rather unlikely—but best to fallback to the system checkbox if so)</a>.</p><h2>Data URLs</h2><p>You&#x27;re probably familiar with a base64 data url. But since our SVGs are made up of UTF-8 characters rather than a buffer, we can skip that extra encoding.</p><p><em>HOWEVER</em> we do need to encode the string somehow because there&#x27;s a mix of dashes, parens, colons, all over the string.</p><p>Fortunately the browser gives us what we need here, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent"><code>encodeURIComponent()</code></a>. The one gotcha that remains is that both single and double quotes are URI safe characters. They&#x27;re control characters in CSS though so we have to encode them ourselves.</p><pre><div style="display:block;overflow-x:auto;padding:2em;background:#011627;color:#d6deeb;font-size:0.6em;margin:1em"><code class="language-js" style="white-space:pre"><span style="color:#c792ea;font-style:italic">const</span><span> svgToDataUrl = </span><span style="color:#82AAFF">(</span><span style="color:#7fdbca">svg</span><span style="color:#82AAFF">) =&gt;</span><span> {
</span><span>  </span><span style="color:#c792ea;font-style:italic">return</span><span> (
</span><span>    </span><span style="color:#ecc48d">&quot;data:image/svg+xml,&quot;</span><span> +
</span><span>    </span><span style="color:#addb67;font-style:italic">encodeURIComponent</span><span>(svg).replace(</span><span style="color:#5ca7e4">/&#x27;/g</span><span>, </span><span style="color:#ecc48d">&quot;%27&quot;</span><span>).replace(</span><span style="color:#5ca7e4">/&quot;/g</span><span>, </span><span style="color:#ecc48d">&quot;%22&quot;</span><span>)
</span>  );
<!-- -->};
</code></div></pre></article><footer><div class="zapplebee-twitter-share" data-tweet-text="I just read &#x27;Create an actually custom checkbox&#x27;" data-tweet-username="zapplebee"></div><a href="https://twitter.com/zapplebee">twitter</a><a href="https://github.com/zapplebee">github</a><a href="https://www.linkedin.com/in/zachary-skalko">linkedin</a></footer><script type="module">import "~/rotate.js";</script><script type="module">import "~/twitter.js";</script></body></html>